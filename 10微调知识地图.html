<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>大语言模型微调知识地图</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .search-container {
            padding: 20px;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
        }

        .search-box {
            width: 100%;
            padding: 15px 20px;
            font-size: 16px;
            border: 2px solid #ddd;
            border-radius: 25px;
            outline: none;
            transition: all 0.3s ease;
        }

        .search-box:focus {
            border-color: #4facfe;
            box-shadow: 0 0 10px rgba(79, 172, 254, 0.3);
        }

        .navigation {
            padding: 20px;
            background: #fff;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }

        .nav-btn {
            padding: 8px 16px;
            background: #e9ecef;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .nav-btn:hover {
            background: #4facfe;
            color: white;
            transform: translateY(-2px);
        }

        .content {
            padding: 30px;
            background: #fff;
        }

        .section {
            margin-bottom: 40px;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }

        .section-header {
            padding: 20px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.3em;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }

        .section-header:hover {
            transform: translateY(-2px);
        }

        .section-content {
            padding: 0 20px 20px;
            display: none;
        }

        .section.expanded .section-content {
            display: block;
        }

        .toggle-icon {
            transition: transform 0.3s ease;
            font-size: 1.2em;
        }

        .section.expanded .toggle-icon {
            transform: rotate(180deg);
        }

        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .knowledge-card {
            background: #fff;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            border-left: 4px solid #4facfe;
        }

        .knowledge-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .card-title {
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .card-content {
            color: #555;
            line-height: 1.6;
        }

        .card-details {
            display: none;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #eee;
            color: #666;
        }

        .knowledge-card.expanded .card-details {
            display: block;
        }

        .highlight {
            background: linear-gradient(120deg, #a8edea 0%, #fed6e3 100%);
            padding: 2px 4px;
            border-radius: 3px;
        }

        .formula {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
            border-left: 4px solid #28a745;
        }

        .analogy {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid #ff6b6b;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            background: #fff;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .comparison-table th,
        .comparison-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        .comparison-table th {
            background: #4facfe;
            color: white;
            font-weight: bold;
        }

        .comparison-table tr:hover {
            background: #f8f9fa;
        }

        /* 不同板块的颜色主题 */
        .basic-concepts .section-header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
        .scenarios .section-header { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; }
        .methods .section-header { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; }
        .lightweight .section-header { background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); color: white; }
        .data-model .section-header { background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); color: white; }
        .evaluation .section-header { background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); color: #333; }
        .practice .section-header { background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%); color: #333; }
        .qa .section-header { background: linear-gradient(135deg, #d299c2 0%, #fef9d7 100%); color: #333; }

        @media (max-width: 768px) {
            .cards-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .navigation {
                flex-direction: column;
            }
        }

        @media print {
            body {
                background: white;
                padding: 0;
            }
            
            .container {
                box-shadow: none;
                border-radius: 0;
            }
            
            .search-container,
            .navigation {
                display: none;
            }
            
            .section-content {
                display: block !important;
            }
            
            .knowledge-card {
                break-inside: avoid;
                box-shadow: none;
                border: 1px solid #ddd;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🤖 大语言模型微调知识地图</h1>
            <p>从基础概念到实践应用的完整指南</p>
        </div>

        <div class="search-container">
            <input type="text" class="search-box" placeholder="🔍 搜索知识点..." id="searchInput">
        </div>

        <div class="navigation">
            <button class="nav-btn" onclick="scrollToSection('basic-concepts')">基础概念</button>
            <button class="nav-btn" onclick="scrollToSection('scenarios')">适用场景</button>
            <button class="nav-btn" onclick="scrollToSection('methods')">方法分类</button>
            <button class="nav-btn" onclick="scrollToSection('lightweight')">轻量化技术</button>
            <button class="nav-btn" onclick="scrollToSection('data-model')">数据与模型</button>
            <button class="nav-btn" onclick="scrollToSection('evaluation')">评估优化</button>
            <button class="nav-btn" onclick="scrollToSection('practice')">实践指导</button>
            <button class="nav-btn" onclick="scrollToSection('qa')">问题解答</button>
        </div>

        <div class="content">
            <!-- 基础概念板块 -->
            <div class="section basic-concepts expanded" id="basic-concepts">
                <div class="section-header" onclick="toggleSection(this)">
                    <span>📚 微调基础概念</span>
                    <span class="toggle-icon">▼</span>
                </div>
                <div class="section-content">
                    <div class="cards-grid">
                        <div class="knowledge-card" onclick="toggleCard(this)">
                            <div class="card-title">什么是微调？</div>
                            <div class="card-content">
                                微调是在预训练大语言模型基础上，使用特定任务数据进行进一步训练的技术
                            </div>
                            <div class="card-details">
                                <strong>核心特征：</strong><br>
                                • 直接修改模型参数<br>
                                • 需要GPU计算资源<br>
                                • 改变模型的内在能力<br>
                                • 产生新的模型权重文件<br><br>
                                <div class="analogy">
                                    <strong>🎯 类比理解：</strong><br>
                                    就像给一个通用医生进行专科培训，让他在某个领域变得更专业
                                </div>
                            </div>
                        </div>

                        <div class="knowledge-card" onclick="toggleCard(this)">
                            <div class="card-title">微调 vs 其他技术对比</div>
                            <div class="card-content">
                                微调与Prompt Engineering、RAG等技术的核心区别
                            </div>
                            <div class="card-details">
                                <table class="comparison-table">
                                    <tr>
                                        <th>维度</th>
                                        <th>微调</th>
                                        <th>Prompt Engineering</th>
                                        <th>RAG</th>
                                    </tr>
                                    <tr>
                                        <td>参数修改</td>
                                        <td>✅ 修改模型参数</td>
                                        <td>❌ 不修改参数</td>
                                        <td>❌ 不修改参数</td>
                                    </tr>
                                    <tr>
                                        <td>计算资源</td>
                                        <td>高（需要GPU训练）</td>
                                        <td>低（仅推理）</td>
                                        <td>中（检索+推理）</td>
                                    </tr>
                                    <tr>
                                        <td>适用场景</td>
                                        <td>特定任务优化</td>
                                        <td>通用任务引导</td>
                                        <td>知识增强</td>
                                    </tr>
                                    <tr>
                                        <td>效果持久性</td>
                                        <td>永久改变模型</td>
                                        <td>临时指导行为</td>
                                        <td>动态知识补充</td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 适用场景板块 -->
            <div class="section scenarios" id="scenarios">
                <div class="section-header" onclick="toggleSection(this)">
                    <span>🎯 微调适用场景</span>
                    <span class="toggle-icon">▼</span>
                </div>
                <div class="section-content">
                    <div class="cards-grid">
                        <div class="knowledge-card" onclick="toggleCard(this)">
                            <div class="card-title">✅ 最适合微调的场景</div>
                            <div class="card-content">
                                全新任务类型和特定语言风格要求
                            </div>
                            <div class="card-details">
                                <strong>1. 全新任务类型：</strong><br>
                                • RPA操作指令生成<br>
                                • 特定行业工作流<br>
                                • 专业代码生成<br><br>
                                
                                <strong>2. 特定语言风格：</strong><br>
                                • 企业内部沟通风格<br>
                                • 特定用户群体语言<br>
                                • 品牌语调一致性<br><br>
                                
                                <div class="analogy">
                                    <strong>🎯 判断标准：</strong><br>
                                    基础模型训练数据中缺乏相关任务模式，需要模型学习全新的输入输出映射关系
                                </div>
                            </div>
                        </div>

                        <div class="knowledge-card" onclick="toggleCard(this)">
                            <div class="card-title">❌ 不建议微调的场景</div>
                            <div class="card-content">
                                简单对话任务和知识补充需求
                            </div>
                            <div class="card-details">
                                <strong>1. 简单对话任务：</strong><br>
                                • 原因：基础模型已具备良好对话能力<br>
                                • 替代方案：Prompt Engineering + 对话模板<br><br>
                                
                                <strong>2. 知识补充需求：</strong><br>
                                • 原因：微调难以有效注入大量事实性知识<br>
                                • 替代方案：RAG系统 + 知识库<br><br>
                                
                                <div class="analogy">
                                    <strong>💡 经验法则：</strong><br>
                                    先尝试应用层解决方案，只有当这些方法无法满足需求时，再考虑微调
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 方法分类板块 -->
            <div class="section methods" id="methods">
                <div class="section-header" onclick="toggleSection(this)">
                    <span>🔧 微调方法分类</span>
                    <span class="toggle-icon">▼</span>
                </div>
                <div class="section-content">
                    <div class="cards-grid">
                        <div class="knowledge-card" onclick="toggleCard(this)">
                            <div class="card-title">🔴 全参数微调</div>
                            <div class="card-content">
                                修改所有模型参数，效果最佳但资源需求大
                            </div>
                            <div class="card-details">
                                <strong>特点：</strong><br>
                                • ✅ 修改所有模型参数<br>
                                • ⚠️ 需要大量GPU内存<br>
                                • ⏰ 训练时间长<br>
                                • 🎯 效果最佳<br>
                                • 🏢 适合模型厂商<br><br>
                                
                                <div class="formula">
                                    参数规模示例：<br>
                                    70B模型 = 700亿参数全部训练
                                </div>
                                
                                <strong>适用场景：</strong><br>
                                • 模型厂商进行基础能力提升<br>
                                • 有充足计算资源的大型项目<br>
                                • 对效果要求极高的关键应用
                            </div>
                        </div>

                        <div class="knowledge-card" onclick="toggleCard(this)">
                            <div class="card-title">🟢 轻量化微调</div>
                            <div class="card-content">
                                仅训练少量新增参数，资源需求小，效果良好
                            </div>
                            <div class="card-details">
                                <strong>特点：</strong><br>
                                • ✅ 仅训练少量新增参数<br>
                                • 💾 GPU内存需求较小<br>
                                • ⚡ 训练速度快<br>
                                • 👍 效果良好<br>
                                • 👥 适合普通用户<br><br>
                                
                                <div class="formula">
                                    参数规模对比：<br>
                                    新增参数 ≈ 1% 原模型<br>
                                    冻结参数 ≈ 99% 原模型
                                </div>
                                
                                <strong>发展趋势：</strong><br>
                                全参数微调 → 轻量化微调 是当前主要方向<br><br>
                                
                                <div class="analogy">
                                    <strong>🎯 类比理解：</strong><br>
                                    就像给汽车加装新功能，而不是重新制造整辆车
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 轻量化技术板块 -->
            <div class="section lightweight" id="lightweight">
                <div class="section-header" onclick="toggleSection(this)">
                    <span>⚡ 轻量化微调技术详解</span>
                    <span class="toggle-icon">▼</span>
                </div>
                <div class="section-content">
                    <div class="cards-grid">
                        <div class="knowledge-card" onclick="toggleCard(this)">
                            <div class="card-title">📈 技术演进路径</div>
                            <div class="card-content">
                                从Prompt Tuning到LoRA的技术发展历程
                            </div>
                            <div class="card-details">
                                <strong>1. Prompt Tuning（已过时）</strong><br>
                                • 原理：在输入前添加可训练的"前缀"参数<br>
                                • 局限：只影响输入层，表达能力有限<br><br>
                                
                                <strong>2. P-Tuning（已过时）</strong><br>
                                • 原理：使用神经网络动态生成前缀<br>
                                • 改进：比Prompt Tuning更灵活<br><br>
                                
                                <strong>3. Prefix Tuning（已过时）</strong><br>
                                • 原理：在每个Transformer层都添加可训练前缀<br>
                                • 改进：影响所有层，但参数利用效率不高<br><br>
                                
                                <strong>4. LoRA（当前主流）</strong><br>
                                • 原理：低秩矩阵分解，用少量参数影响大矩阵<br>
                                • 优势：参数效率高，效果好
                            </div>
                        </div>

                        <div class="knowledge-card" onclick="toggleCard(this)">
                            <div class="card-title">🎯 LoRA核心原理</div>
                            <div class="card-content">
                                通过矩阵分解用两个小矩阵近似大矩阵更新
                            </div>
                            <div class="card-details">
                                <strong>核心思想：</strong><br>
                                <div class="formula">
                                    原始更新：W_new = W_original + ΔW<br>
                                    LoRA更新：W_new = W_original + A × B
                                </div>
                                
                                <strong>参数量对比：</strong><br>
                                <div class="formula">
                                    原始矩阵：12288 × 12288 = 150,994,944 参数<br>
                                    LoRA(r=8)：196,608 参数（减少99.87%）
                                </div>
                                
                                <div class="analogy">
                                    <strong>🎯 类比理解：</strong><br>
                                    就像用两个小齿轮的组合来替代一个大齿轮的功能，既节省材料又保持效果
                                </div>
                            </div>
                        </div>

                        <div class="knowledge-card" onclick="toggleCard(this)">
                            <div class="card-title">🔧 LoRA应用策略</div>
                            <div class="card-content">
                                在Transformer不同组件中的应用配置
                            </div>
                            <div class="card-details">
                                <strong>Transformer权重矩阵：</strong><br>
                                • 多头注意力：WQ, WK, WV, WO<br>
                                • 前馈网络：W1, W2<br><br>
                                
                                <strong>常见配置方案：</strong><br>
                                <table class="comparison-table">
                                    <tr>
                                        <th>配置</th>
                                        <th>应用矩阵</th>
                                        <th>参数量</th>
                                        <th>适用场景</th>
                                    </tr>
                                    <tr>
                                        <td>基础</td>
                                        <td>WQ + WV</td>
                                        <td>~0.4%</td>
                                        <td>资源极度受限</td>
                                    </tr>
                                    <tr>
                                        <td>标准</td>
                                        <td>所有注意力矩阵</td>
                                        <td>~0.8%</td>
                                        <td>大多数微调任务</td>
                                    </tr>
                                    <tr>
                                        <td>完整</td>
                                        <td>注意力+FFN</td>
                                        <td>~2%</td>
                                        <td>复杂任务</td>
                                    </tr>
                                </table>
                            </div>
                        </div>

                        <div class="knowledge-card" onclick="toggleCard(this)">
                            <div class="card-title">🚀 QLoRA技术</div>
                            <div class="card-content">
                                量化+LoRA，进一步降低内存需求
                            </div>
                            <div class="card-details">
                                <strong>核心改进：</strong><br>
                                结合量化技术进一步降低内存需求<br><br>
                                
                                <strong>技术要点：</strong><br>
                                • 将原始模型参数从32位降至8位或4位<br>
                                • 在量化模型基础上应用LoRA<br>
                                • 显著降低GPU内存需求（可减少50-75%）<br><br>
                                
                                <strong>适用场景：</strong><br>
                                GPU内存不足时的首选方案<br><br>
                                
                                <div class="analogy">
                                    <strong>🎯 类比理解：</strong><br>
                                    就像把高清图片压缩后再进行编辑，既节省存储空间又保持编辑能力
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 数据与模型板块 -->
            <div class="section data-model" id="data-model">
                <div class="section-header" onclick="toggleSection(this)">
                    <span>📊 模型选择与数据准备</span>
                    <span class="toggle-icon">▼</span>
                </div>
                <div class="section-content">
                    <div class="cards-grid">
                        <div class="knowledge-card" onclick="toggleCard(this)">
                            <div class="card-title">🎯 基础模型选择策略</div>
                            <div class="card-content">
                                优先开源模型，从小规模开始
                            </div>
                            <div class="card-details">
                                <strong>1. 开源 vs 闭源：</strong><br>
                                推荐优先选择开源模型<br>
                                • 可控性强，不受厂商政策影响<br>
                                • 成本可预测，避免API调用费用<br>
                                • 数据安全，本地部署保护隐私<br><br>
                                
                                <strong>2. 模型规模选择：</strong><br>
                                <table class="comparison-table">
                                    <tr>
                                        <th>模型规模</th>
                                        <th>适用场景</th>
                                        <th>内存需求</th>
                                        <th>训练时间</th>
                                    </tr>
                                    <tr>
                                        <td>7B-8B</td>
                                        <td>简单任务、概念验证</td>
                                        <td>~16GB</td>
                                        <td>数小时</td>
                                    </tr>
                                    <tr>
                                        <td>13B-14B</td>
                                        <td>中等复杂度任务</td>
                                        <td>~26GB</td>
                                        <td>十数小时</td>
                                    </tr>
                                    <tr>
                                        <td>30B-34B</td>
                                        <td>复杂任务</td>
                                        <td>~60GB</td>
                                        <td>数十小时</td>
                                    </tr>
                                    <tr>
                                        <td>70B+</td>
                                        <td>最复杂任务</td>
                                        <td>~140GB+</td>
                                        <td>数天</td>
                                    </tr>
                                </table>
                            </div>
                        </div>

                        <div class="knowledge-card" onclick="toggleCard(this)">
                            <div class="card-title">📋 训练数据准备</div>
                            <div class="card-content">
                                高质量数据是微调成功的关键
                            </div>
                            <div class="card-details">
                                <strong>数据质量要求：</strong><br>
                                • 真实性：使用真实业务场景数据<br>
                                • 一致性：建立标注规范和质量检查<br>
                                • 分布对齐：反映真实使用场景分布<br><br>
                                
                                <strong>数据量需求指导：</strong><br>
                                <div class="formula">
                                    所需数据量 = f(模型规模, 任务复杂度, 知识密度)
                                </div>
                                
                                <strong>经验数值：</strong><br>
                                • 7B-8B模型：1,000-5,000个高质量样本<br>
                                • 13B-14B模型：3,000-10,000个样本<br>
                                • 30B+模型：10,000-50,000个样本<br><br>
                                
                                <div class="analogy">
                                    <strong>💡 核心原则：</strong><br>
                                    质量 > 数量：1000个高质量样本 > 10000个低质量样本
                                </div>
                            </div>
                        </div>

                        <div class="knowledge-card" onclick="toggleCard(this)">
                            <div class="card-title">🏗️ 数据管理平台</div>
                            <div class="card-content">
                                分层架构设计，支持大规模数据处理
                            </div>
                            <div class="card-details">
                                <strong>平台架构：</strong><br>
                                • 数据来源层：多元化数据源<br>
                                • 数据处理层：标注、清洗、验证<br>
                                • 数据管理层：版本控制、标签分类<br>
                                • 输出层：标准化训练数据包<br><br>
                                
                                <strong>核心功能：</strong><br>
                                • AI辅助标注减少人工工作量<br>
                                • 交叉验证保证数据质量<br>
                                • 版本控制支持迭代优化<br>
                                • 效果追踪指导数据改进<br><br>
                                
                                <div class="analogy">
                                    <strong>🎯 价值体现：</strong><br>
                                    就像工厂的生产线，标准化流程保证产品质量和效率
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 评估优化板块 -->
            <div class="section evaluation" id="evaluation">
                <div class="section-header" onclick="toggleSection(this)">
                    <span>📈 评估与优化策略</span>
                    <span class="toggle-icon">▼</span>
                </div>
                <div class="section-content">
                    <div class="cards-grid">
                        <div class="knowledge-card" onclick="toggleCard(this)">
                            <div class="card-title">🎯 模型评估方法</div>
                            <div class="card-content">
                                科学的数据分割和多维度评估
                            </div>
                            <div class="card-details">
                                <strong>1. 数据分割策略：</strong><br>
                                <div class="formula">
                                    总数据集<br>
                                    ├── 训练集 (70%)<br>
                                    ├── 验证集 (15%)<br>
                                    └── 测试集 (15%)
                                </div>
                                
                                <strong>2. 过拟合识别：</strong><br>
                                • 症状：训练损失下降，验证损失上升<br>
                                • 解决：增加数据、降低复杂度、早停<br><br>
                                
                                <strong>3. 量化评估指标：</strong><br>
                                • 准确率评估：AI/人工评分对比<br>
                                • 偏好评估：用户盲测胜率统计<br>
                                • 分场景评估：按复杂度和业务场景分类
                            </div>
                        </div>

                        <div class="knowledge-card" onclick="toggleCard(this)">
                            <div class="card-title">🔄 数据飞轮机制</div>
                            <div class="card-content">
                                通过产品使用产生数据，形成正向循环
                            </div>
                            <div class="card-details">
                                <strong>飞轮循环流程：</strong><br>
                                <div class="formula">
                                    用户反馈 → 数据收集 → 模型训练<br>
                                    ↑                           ↓<br>
                                    策略调整 ← 产品优化 ← 效果评估
                                </div>
                                
                                <strong>各环节要点：</strong><br>
                                • 用户反馈：产品内评分、行为数据<br>
                                • 数据收集：对话记录、用户选择<br>
                                • 模型训练：增量训练、A/B测试<br>
                                • 效果评估：准确率、满意度、业务指标<br>
                                • 产品优化：界面改进、功能增强<br>
                                • 策略调整：数据策略、训练策略<br><br>
                                
                                <div class="analogy">
                                    <strong>🎯 成功要素：</strong><br>
                                    用户激励 + 数据质量 + 快速迭代 + 效果可见
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 实践指导板块 -->
            <div class="section practice" id="practice">
                <div class="section-header" onclick="toggleSection(this)">
                    <span>🛠️ 实践指导与工具</span>
                    <span class="toggle-icon">▼</span>
                </div>
                <div class="section-content">
                    <div class="cards-grid">
                        <div class="knowledge-card" onclick="toggleCard(this)">
                            <div class="card-title">💻 技术实现</div>
                            <div class="card-content">
                                推荐技术栈和硬件资源需求
                            </div>
                            <div class="card-details">
                                <strong>推荐技术栈：</strong><br>
                                Hugging Face Transformers + PEFT<br><br>
                                
                                <strong>基础代码流程：</strong><br>
                                • 环境配置<br>
                                • 数据集准备<br>
                                • 模型加载<br>
                                • 训练参数配置<br>
                                • LoRA配置<br>
                                • 训练执行<br>
                                • 模型保存<br>
                                • 效果评估<br><br>
                                
                                <strong>GPU内存计算：</strong><br>
                                <div class="formula">
                                    所需显存 = 模型参数量 × 4字节 ÷ (1024³)<br>
                                    示例：7B模型 ≈ 26GB显存
                                </div>
                            </div>
                        </div>

                        <div class="knowledge-card" onclick="toggleCard(this)">
                            <div class="card-title">💰 成本估算</div>
                            <div class="card-content">
                                不同规模模型的训练成本参考
                            </div>
                            <div class="card-details">
                                <strong>训练成本示例：</strong><br>
                                • 7B模型LoRA微调：2-10小时，成本20-100元<br>
                                • 13B模型LoRA微调：5-20小时，成本50-200元<br>
                                • 70B模型LoRA微调：20-100小时，成本200-1000元<br><br>
                                
                                <strong>云服务推荐：</strong><br>
                                • AutoDL：性价比高，适合个人和小团队<br>
                                • 阿里云PAI：企业级服务，稳定性好<br>
                                • AWS SageMaker：国际化选择，功能完整<br><br>
                                
                                <div class="analogy">
                                    <strong>💡 成本优化建议：</strong><br>
                                    从小模型开始验证效果，再逐步扩大规模
                                </div>
                            </div>
                        </div>

                        <div class="knowledge-card" onclick="toggleCard(this)">
                            <div class="card-title">👥 团队协作</div>
                            <div class="card-content">
                                理想团队配置和分工协作模式
                            </div>
                            <div class="card-details">
                                <strong>理想团队配置：</strong><br>
                                <div class="formula">
                                    微调项目团队：<br>
                                    ├── 算法工程师（代码实现）<br>
                                    ├── 数据工程师（数据处理）<br>
                                    ├── 业务专家（需求定义）<br>
                                    └── 产品经理（效果评估）
                                </div>
                                
                                <strong>分工协作模式：</strong><br>
                                • 技术+业务配对工作<br>
                                • 技术人员：代码和训练<br>
                                • 业务人员：数据和评估<br>
                                • 定期同步进展和问题<br>
                                • 共同制定优化策略<br><br>
                                
                                <div class="analogy">
                                    <strong>🎯 协作关键：</strong><br>
                                    技术理解业务需求，业务理解技术限制
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 问题解答板块 -->
            <div class="section qa" id="qa">
                <div class="section-header" onclick="toggleSection(this)">
                    <span>❓ 思考问题与答案</span>
                    <span class="toggle-icon">▼</span>
                </div>
                <div class="section-content">
                    <div class="cards-grid">
                        <div class="knowledge-card" onclick="toggleCard(this)">
                            <div class="card-title">🤔 何时选择微调而非RAG？</div>
                            <div class="card-content">
                                判断微调和RAG适用场景的决策框架
                            </div>
                            <div class="card-details">
                                <strong>选择微调的情况：</strong><br>
                                • 全新任务类型：基础模型从未见过的任务模式<br>
                                • 特定输出格式：需要特定结构化格式或语言风格<br>
                                • 实时性要求高：不能依赖外部知识库检索<br>
                                • 知识融合需求：需要深度融合多个概念<br><br>
                                
                                <strong>判断标准：</strong><br>
                                如果精心设计的提示词和RAG系统仍无法达到期望效果，且有足够的高质量训练数据，则考虑微调<br><br>
                                
                                <div class="analogy">
                                    <strong>🎯 决策原则：</strong><br>
                                    先尝试应用层方案，再考虑模型层改动
                                </div>
                            </div>
                        </div>

                        <div class="knowledge-card" onclick="toggleCard(this)">
                            <div class="card-title">💰 如何评估投入产出比？</div>
                            <div class="card-content">
                                微调项目的成本收益分析框架
                            </div>
                            <div class="card-details">
                                <strong>成本计算：</strong><br>
                                • 数据准备：标注人员工时 + 质量控制<br>
                                • 计算资源：GPU租用费用 + 电力成本<br>
                                • 人力成本：工程师开发 + 调优时间<br>
                                • 机会成本：相同资源投入其他方案的潜在收益<br><br>
                                
                                <strong>收益评估：</strong><br>
                                • 性能提升：准确率提升 × 业务价值<br>
                                • 用户体验：满意度提升 × 用户价值<br>
                                • 运营效率：自动化程度 × 人力成本节约<br>
                                • 竞争优势：技术壁垒 + 市场先发优势<br><br>
                                
                                <div class="formula">
                                    决策框架：<br>
                                    预期收益 > 总成本 × 1.5倍 → 可行
                                </div>
                            </div>
                        </div>

                        <div class="knowledge-card" onclick="toggleCard(this)">
                            <div class="card-title">📊 可持续数据收集策略</div>
                            <div class="card-content">
                                建立长期有效的数据收集和质量保证机制
                            </div>
                            <div class="card-details">
                                <strong>多渠道数据来源：</strong><br>
                                • 用户行为数据：产品内交互记录<br>
                                • 专家标注数据：高质量但成本高<br>
                                • AI辅助生成：快速扩充，需人工验证<br>
                                • 众包标注：成本可控，需质量控制<br>
                                • 合作伙伴数据：行业数据交换<br><br>
                                
                                <strong>质量保证机制：</strong><br>
                                • 建立标注规范和培训体系<br>
                                • 实施多人交叉验证<br>
                                • 定期质量审核和改进<br>
                                • 建立反馈和激励机制<br><br>
                                
                                <strong>数据飞轮设计：</strong><br>
                                产品功能 → 用户参与 → 数据收集 → 模型改进 → 产品优化 → 形成循环
                            </div>
                        </div>

                        <div class="knowledge-card" onclick="toggleCard(this)">
                            <div class="card-title">🎯 关键成功要素总结</div>
                            <div class="card-content">
                                微调项目成功的核心要素和经验法则
                            </div>
                            <div class="card-details">
                                <strong>成功微调项目需要：</strong><br>
                                • 明确的应用场景：确保微调是最佳解决方案<br>
                                • 高质量的训练数据：决定微调效果的关键因素<br>
                                • 合理的技术选择：根据资源约束选择方法<br>
                                • 科学的评估体系：量化效果，指导优化<br>
                                • 可持续的数据策略：长期数据收集和质量保证<br><br>
                                
                                <div class="formula">
                                    核心成功公式：<br>
                                    数据质量 > 模型规模 > 算法技巧
                                </div>
                                
                                <strong>经验法则：</strong><br>
                                • 先尝试应用层解决方案<br>
                                • 从小模型开始验证效果<br>
                                • 重视数据质量胜过数量<br>
                                • 建立持续优化机制<br><br>
                                
                                <div class="analogy">
                                    <strong>🎯 最终建议：</strong><br>
                                    微调不是万能的，在合适的场景下使用才能发挥最大价值
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 搜索功能
        function setupSearch() {
            const searchInput = document.getElementById('searchInput');
            const cards = document.querySelectorAll('.knowledge-card');
            const sections = document.querySelectorAll('.section');

            searchInput.addEventListener('input', function() {
                const query = this.value.toLowerCase().trim();
                
                if (query === '') {
                    // 清空搜索时恢复原状
                    cards.forEach(card => {
                        card.style.display = 'block';
                        removeHighlight(card);
                    });
                    sections.forEach(section => {
                        section.style.display = 'block';
                    });
                    return;
                }

                let hasVisibleCards = false;
                
                sections.forEach(section => {
                    let sectionHasVisible = false;
                    const sectionCards = section.querySelectorAll('.knowledge-card');
                    
                    sectionCards.forEach(card => {
                        const title = card.querySelector('.card-title').textContent.toLowerCase();
                        const content = card.querySelector('.card-content').textContent.toLowerCase();
                        const details = card.querySelector('.card-details');
                        const detailsText = details ? details.textContent.toLowerCase() : '';
                        
                        if (title.includes(query) || content.includes(query) || detailsText.includes(query)) {
                            card.style.display = 'block';
                            highlightText(card, query);
                            sectionHasVisible = true;
                            hasVisibleCards = true;
                            
                            // 展开匹配的卡片
                            if (!card.classList.contains('expanded')) {
                                card.classList.add('expanded');
                            }
                        } else {
                            card.style.display = 'none';
                            removeHighlight(card);
                        }
                    });
                    
                    // 显示/隐藏整个板块
                    section.style.display = sectionHasVisible ? 'block' : 'none';
                    
                    // 展开有匹配内容的板块
                    if (sectionHasVisible && !section.classList.contains('expanded')) {
                        section.classList.add('expanded');
                    }
                });
            });
        }

        // 高亮搜索结果
        function highlightText(element, query) {
            removeHighlight(element);
            
            const walker = document.createTreeWalker(
                element,
                NodeFilter.SHOW_TEXT,
                null,
                false
            );
            
            const textNodes = [];
            let node;
            while (node = walker.nextNode()) {
                textNodes.push(node);
            }
            
            textNodes.forEach(textNode => {
                const text = textNode.textContent;
                const regex = new RegExp(`(${query})`, 'gi');
                if (regex.test(text)) {
                    const highlightedText = text.replace(regex, '<span class="highlight">$1</span>');
                    const wrapper = document.createElement('div');
                    wrapper.innerHTML = highlightedText;
                    
                    while (wrapper.firstChild) {
                        textNode.parentNode.insertBefore(wrapper.firstChild, textNode);
                    }
                    textNode.parentNode.removeChild(textNode);
                }
            });
        }

        // 移除高亮
        function removeHighlight(element) {
            const highlights = element.querySelectorAll('.highlight');
            highlights.forEach(highlight => {
                const parent = highlight.parentNode;
                parent.replaceChild(document.createTextNode(highlight.textContent), highlight);
                parent.normalize();
            });
        }

        // 切换板块展开/收起
        function toggleSection(header) {
            const section = header.parentElement;
            section.classList.toggle('expanded');
        }

        // 切换卡片展开/收起
        function toggleCard(card) {
            card.classList.toggle('expanded');
        }

        // 滚动到指定板块
        function scrollToSection(sectionId) {
            const section = document.getElementById(sectionId);
            if (section) {
                section.scrollIntoView({ behavior: 'smooth', block: 'start' });
                
                // 确保板块是展开的
                if (!section.classList.contains('expanded')) {
                    section.classList.add('expanded');
                }
            }
        }

        // 键盘快捷键
        function setupKeyboardShortcuts() {
            document.addEventListener('keydown', function(e) {
                // Ctrl/Cmd + F 聚焦搜索框
                if ((e.ctrlKey || e.metaKey) && e.key === 'f') {
                    e.preventDefault();
                    document.getElementById('searchInput').focus();
                }
                
                // ESC 清空搜索
                if (e.key === 'Escape') {
                    const searchInput = document.getElementById('searchInput');
                    if (searchInput.value) {
                        searchInput.value = '';
                        searchInput.dispatchEvent(new Event('input'));
                    }
                }
            });
        }

        // 打印优化
        function setupPrintOptimization() {
            window.addEventListener('beforeprint', function() {
                // 展开所有板块和卡片以便打印
                document.querySelectorAll('.section').forEach(section => {
                    section.classList.add('expanded');
                });
                document.querySelectorAll('.knowledge-card').forEach(card => {
                    card.classList.add('expanded');
                });
            });
        }

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            setupSearch();
            setupKeyboardShortcuts();
            setupPrintOptimization();
            
            // 默认展开第一个板块
            const firstSection = document.querySelector('.section');
            if (firstSection) {
                firstSection.classList.add('expanded');
            }
            
            console.log('🤖 大语言模型微调知识地图已加载完成！');
            console.log('💡 使用提示：');
            console.log('- 点击板块标题展开/收起内容');
            console.log('- 点击知识卡片查看详细信息');
            console.log('- 使用搜索框快速定位知识点');
            console.log('- Ctrl/Cmd+F 快速聚焦搜索框');
            console.log('- ESC 清空搜索结果');
        });
    </script>
</body>
</html>